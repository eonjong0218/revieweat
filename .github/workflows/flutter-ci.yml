name: Flutter CI  # 워크플로우 이름

on:
  push:
    branches: [main]  # main 브랜치에 push될 때 실행
  pull_request:
    branches: [main]  # main 브랜치로 PR 생성/수정 시 실행
  schedule:
    - cron: '0 15 * * *'  # 매일 한국 시간 자정(00:00)에 자동 실행

jobs:
  flutter-build:
    runs-on: ubuntu-latest  # 최신 우분투 환경에서 실행

    steps:
      - uses: actions/checkout@v3  # 저장소 코드를 체크아웃(가져오기)
      - uses: subosito/flutter-action@v2  # Flutter SDK 설치
        with:
          flutter-version: '3.7.2'  # Flutter 버전 지정

      - run: |
          cd frontend  # Flutter 프로젝트 폴더로 이동
          flutter pub get       # 의존성 패키지 설치
          flutter analyze       # 코드 정적 분석 수행
          flutter test          # 단위 테스트 실행
          flutter build apk --debug  # 디버그 모드 APK 빌드
